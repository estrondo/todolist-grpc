syntax = "proto3";

package todolist.v1;

message Account {
  message Profile {
    string id = 1;
    string name = 2;
    string theme = 3;
    string email = 4;
    map<string, PreferenceValue> preferences = 5;
  }

  message PreferenceValue {
    oneof value {
      string string_value = 1;
      int32 int_value = 2;
      int64 long_value = 3;
      bool bool_value = 4;
      float float_value = 5;
      double double_value = 6;
    }
  }

  message UpdateProfileRequest {
    Profile profile = 1;
  }

  message UpdateProfileResponse {
    Profile profile = 2;
  }

  message RemoveRequest {
    string id = 1;
  }

  message RemoveResponse {
    string id = 1;
  }

  message UploadAvatarRequest {
    string id = 1;
    bytes content = 2;
  }

  message UploadAvatarResponse {
    string id = 1;
    bytes content = 2;
  }

  message GetProfileRequest {
    string id = 1;
  }

  message GetProfileResponse {
    Profile profile = 1;
  }

  message GetAvatarRequest {
    string id = 1;
  }

  message GetAvatarResponse {
    string id = 1;
    bytes content = 2;
  }
}

service AccountService {
  rpc GetProfile(Account.GetProfileRequest) returns (Account.GetProfileResponse);

  rpc GetAvatar(Account.GetAvatarRequest) returns (Account.GetAvatarResponse);

  rpc UpdateProfile(Account.UpdateProfileRequest) returns (Account.UpdateProfileResponse);

  rpc UploadAvatar(Account.UploadAvatarRequest) returns (Account.UploadAvatarResponse);

  rpc Remove(Account.RemoveRequest) returns (Account.RemoveResponse);
}
